<h2>{{ heading }} - {{ countOfFilledForms }}</h2>

<div>
  @if (innerFormGroups.length) {
  <!---->
  @for (formGroup of innerFormGroups; track $index) {
  <!----->
  @if (editMode[$index]) {
  <!----->
  <ng-container
    *ngTemplateOutlet="formTemplateRef; context: { $implicit: formGroup }"
  />

  <button (click)="cancel($index)">Cancel</button>
  <button (click)="save($index)">Save</button>
  <!---->
  } @else {
  <!---->
  <div>
    <ng-container
      *ngTemplateOutlet="
        displayTemplateRef;
        context: { $implicit: formGroup.value }
      "
    />

    <button (click)="edit($index)">Edit</button>
    <button (click)="removeControl($index)">Delete</button>
    @if ($index + 1 != innerFormGroups.length) {
    <p>_____________________________________________________</p>
    }
  </div>
  <!---->
  }
  <!----->
  } @if (addForm) {
  <!---->
  <ng-container
    *ngTemplateOutlet="formTemplateRef; context: { $implicit: addForm }"
  />

  <button (click)="cancelAdd()">Cancel</button>
  <button (click)="saveAdd()">Save</button>
  <!----->
  }

  <!---->
  } @else if (addForm) {
  <!----->
  <ng-container
    *ngTemplateOutlet="formTemplateRef; context: { $implicit: addForm }"
  />

  <button (click)="cancelAdd()">Cancel</button>
  <button (click)="saveAdd()">Save</button>
  <!----->
  } @else {
  <!----->
  <p>No entries</p>
  <!----->
  } @if (!addForm) {
  <!---->
  <p>_____________________________________________</p>

  <button (click)="addControl()">
    {{ addButtonLabel }}
  </button>
  <!---->
  }
</div>
